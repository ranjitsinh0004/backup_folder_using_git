
# Install python 3.6
	Ubuntu 18.04 as well as Ubuntu 17.10 come with Python 3.6 pre-installed, which is not the case for older Ubuntu versions.
	Check your version of Python by entering the following:
		python ––version
	for older version please refer how to install python 3.6 using binary
		ref: https://www.tecmint.com/install-python-in-ubuntu/
# Install pip3: 
	ranjit@ranjit-ThinkPad-X240:~$ sudo apt install python-pip

# Install git

# Create virtual env

	sudo apt install virtualenv
	virtualenv -p python3 .venv
	source .venv/bin/activate

	#ranjits way:
		folder structure
		
			eco_dir
			      |
			      |---central-api
			      |---virtu_env

		--> how to activate virtual environment here the name of environment which i have created is 'virtu_env'
			ranjit@ranjit-ThinkPad-X240:~/central-api$ source /home/ranjit/eco_dir/virtu_env/bin/activate
			now you can see:
				(virtu_env) ranjit@ranjit-ThinkPad-X240:~/central-api$ 
		--> how to deactivate the virtual environment
			(virtu_env) ranjit@ranjit-ThinkPad-X240:~/central-api$ deactivate
			now you can see:
				ranjit@ranjit-ThinkPad-X240:~/central-api$


# Clone Repo and Create Django Project

	# Clone git-repo
	git clone https://github.com/Ecolibrium-Energy/central-api.git
	git checkout -b develop origin/develop

	git config --global user.email "sandip.darwade@ecolibriumenergy.com"
	git config --global user.name "sandip.darwade"

	make install

#to check the current user name
		whoami
#install postgres [ref:https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-18-04]
	ranjit@ranjit-ThinkPad-X240:~/central-api$ sudo apt update
	ranjit@ranjit-ThinkPad-X240:~/central-api$ sudo apt install postgresql postgresql-contrib

#create database into it e.g in this case we created database with name smartsense
	postgres=# CREATE DATABASE smartsense;

#to check the list of databases and the database smartsense you can see in the list. 
	 postgres-# \l 
#to quit
		postgres=# \q
		postgres@ranjit-ThinkPad-X240:/home/ranjit/central-api$ exit
	now you will be at
		(virtu_env) ranjit@ranjit-ThinkPad-X240:~/central-api$ 


#download postgres database from github i.e. https://github.com/Ecolibrium-Energy/central-api from Postgres Data Restore section.

#your database will be in the download folder and may be in the zip format

#go to download folder and open the terminal there 

#enter the command on the terminal and use the provided password for extracting the database here in this case postgres password: 	ecolibriumIoT19
	
	unzip -P <password> smartsense_db.zip


#here also the terminal is already opened in the downloads folder then to restore the database which is downloaded
	 psql -h <host> -p <port> -U <username> -d smartsense < path/to/dump/smartsense_db_Y_m_d.sql
	 e.g:
		 psql -h localhost -p 5432 -U postgres -d smartsense < smartsense_db_2019_08_26.sql








***********************GENERAL STEPS FOR POSTGRES DATABASE SETUP**************************

#how to enter into the postgres[here we are using the path of our django project and also activated the virtual environment named virtu_env but these are the general steps you can perform at any path]

	step I: to enter into postgres database
		(virtu_env) ranjit@ranjit-ThinkPad-X240:~/central-api$ sudo su postgres
				OR
		(virtu_env) ranjit@ranjit-ThinkPad-X240:~/central-api$ sudo -i -u postgres

	step II: it will ask for user password. Enter the password

	step III: the terminal will be at postgres user here we are using the default user i.e postgres e.g postgres@ranjit-ThinkPad-X240:/home/ranjit/central-api$ 

	step IV: use psql
		postgres@ranjit-ThinkPad-X240:/home/ranjit/central-api$ psql
	step V: now to see the list of databases
		postgres-# \l
	step VI: to quit
		postgres=# \q
		postgres@ranjit-ThinkPad-X240:/home/ranjit/central-api$ exit
	now you will be at
		(virtu_env) ranjit@ranjit-ThinkPad-X240:~/central-api$ 
#If needed you should install Psycopg
 Psycopg is the most popular PostgreSQL database adapter for the Python programming language. Its main features are the complete implementation of the Python DB API 2.0 specification and the thread safety (several threads can share the same connection).


#to see the pkgs installed for the projects:
	(virtu_env) ranjit@ranjit-ThinkPad-X240:~/central-api$ pip list



***********************ValueError: Unable to configure handler 'default': [Errno 2] No such file or directory: '/var/log/smartsense/admin.log'***********

#create /var/log/smartsense/admin.log  i.e admin.log file into the said location
	--> open the terminal
	 	ranjit@ranjit-ThinkPad-X240:~$ cd /var/log
		ranjit@ranjit-ThinkPad-X240:/var/log$ mkdir smartsense
		ranjit@ranjit-ThinkPad-X240:/var/log$ cd smartsense
		ranjit@ranjit-ThinkPad-X240:/var/log/smartsense$ sudo touch admin.log

****************ValueError: Unable to configure handler 'default': [Errno 13] Permission denied: '/var/log/smartsense/admin.log'*******
# giving the perminssion to a file e.g admin.log
		sudo chmod -R 777 admin.log


**************redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.***************
# install redis-server
	ranjit@ranjit-ThinkPad-X240:~$ sudo apt-get install redis-server


***************ValueError: Unable to configure handler 'error_file_handler': [Errno 13] Permission denied: '/var/log/smartsense/aggregation-error.log'**************
# create and give the permission to aggregation-error.log
	ranjit@ranjit-ThinkPad-X240:/var/log/smartsense$ sudo touch aggregation-error.log
	ranjit@ranjit-ThinkPad-X240:/var/log/smartsense$ sudo chmod -R 777 aggregation-error.log
#REPEAT THE ABOVE PROCEDURE WHENEVER THE FILES ARE MISSING AND ASKING THE PERMISSIONS



******************make migrations and migrate********************************

# make migrations and migrate
	(virtu_env) ranjit@ranjit-ThinkPad-X240:~/central-api$ python manage.py makemigrations
	(virtu_env) ranjit@ranjit-ThinkPad-X240:~/central-api$ python manage.py migrate


*********if needed create superuser locally so that you can use admin







		
	
			
		




